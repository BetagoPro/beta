<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bnw.beta.domain.subscribe.dao.payDAO">
<!--게임컨텐츠결제-->
<select id="selectContentsPay" parameterType="Integer" resultType="payDTO">
    <![CDATA[
    SELECT * FROM game WHERE game_no = #{game_no};
    ]]>
</select>

<insert id="insertIntoPay" parameterType="payDTO">
    <![CDATA[
    INSERT INTO pay (member_id, game_no, pay_name, pay_phone, pay_type, buy_name, pay_enddate)
    VALUES (#{member_id}, #{game_no}, #{pay_name}, #{pay_phone}, #{pay_type}, #{buy_name}, DATE_ADD(CURRENT_DATE(), INTERVAL #{game_date} MONTH));
    ]]>
</insert>

<select id="selectBuylist" parameterType="java.util.List" resultType="payDTO">
    <![CDATA[
    SELECT g.*, f.filegame_name, f.filegame_path, f.filegame_date
    FROM game g
    INNER JOIN filegame f ON g.game_no = f.game_no
    WHERE g.game_no IN
    ]]>
    <foreach item="item" index="index" collection="list" open="(" separator="," close=")">
        #{item}
    </foreach>
</select>


</mapper>
