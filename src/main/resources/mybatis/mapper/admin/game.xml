<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bnw.beta.domain.admin.dao.GameDAO">
<!--게임콘텐츠 모든 목록 조회-->
    <select id="selectAll" resultType="GameDTO">
        <![CDATA[
        SELECT game.game_no, game.game_title, game.game_level, game.game_startdate, game.game_enddate, game.game_total,
        game.game_price, discountgame.game_discount, game.game_sell, game.game_content, game.member_id
        FROM game
        LEFT JOIN discountgame ON game.game_no = discountgame.game_no
        WHERE game.game_no = #{gameNo}
        ]]>
    </select>
    <!--게임콘텐츠 등록-->
    <insert  id="insertGame" parameterType="GameDTO">
            <![CDATA[
                   <insert id="insertGame" parameterType="com.example.model.Game">
        INSERT INTO game (
            game_title,
            game_level,
            game_duration,
            game_total,
            game_price,
            game_discount,
            game_sell,
            game_content,
            member_id
        ) VALUES (
            #{game_title},
            #{game_level},
            #{game_duration},
            #{game_total},
            #{game_price},
            #{game_content},
            #{member_id}
        )
        ]]>
    </insert>
    <!--월간 (일일 단위 매출조회)-->
   <select id="selectDailySales" resultType="GameDTO">
        <![CDATA[
            select DATE_FORMAT(game_startsearch, '%m-%d') AS game_startsearch, game_sales, SUM(game_sales * game_sell) AS game_dailyamount
            from game
            where game_startsearch between #{game_startsearch} and #{game_endsearch}
            group by DATE_FORMAT(game_startsearch, '%m-%d')
            order by game_startsearch desc;
        ]]>
   </select>
    <!--년간 (월 단위 매출조회)-->
    <select id="selectMonthlySales" resultType="GameDTO">
        <![CDATA[
            select DATE_FORMAT(game_startsearch, '%Y-%m') AS game_startsearch, game_sales, SUM(game_sales*game_sell)
            AS game_monthlyamount
            from game
            where game_startsearch between #{game_startsearch} and #{game_endsearch}
            group by DATE_FORMAT(game_startsearch, '%Y-%m')
            order by game_startsearch desc;
        ]]>
    </select>
<!--게임콘텐츠 제목 검색-->
    <select id="searchByTitle" resultType="GameDTO">
        <![CDATA[
            select *
            from game
            where game_title = #{game_title}
        ]]>
    </select>


</mapper>


