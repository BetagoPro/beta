<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>공지게시판리스트</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/guide/notice/notice_sidebar.css}">
    <link rel="stylesheet" th:href="@{/css/admin/notice/noticelist.css}">
    <div th:replace="~{common/fragments/config :: configFragment}"></div>
</head>
<body>
<div th:replace="~{common/fragments/header :: headerFragment}"></div>
<div class="content">
    <div th:replace="~{common/sidebar/guide_sidebar :: guide_sidebarFragment}"></div>
    <div class="content-wrap">
        <div id="bbsList">
            <div id="bbsList_title">
                <h2 class="head">공지 게시판</h2>
            </div>

            <div class="button-container">
                <div class="writeBtn right-aligned">
                    <a class="btnWrite" th:href="@{/admin/notice/write}">
                        <button class="btnWrite">글쓰기</button>
                    </a>
                </div>

                <div class="search-container">
                    <form id="searchForm" method="get" th:action="@{/notice/list}" autocomplete="off">
                        <div class="sch_group">
                            <label>
                                <select class="search-box" name="searchType">
                                    <option value="notice_title"
                                            th:classappend="${(searchType == 'notice_title') ? 'selected' : ''}">제목
                                    </option>
                                    <option value="notice_content"
                                            th:classappend="${(searchType == 'notice_content') ? 'selected' : ''}">내용
                                    </option>
                                    <option value="title_content"
                                            th:classappend="${(searchType == 'title_content') ? 'selected' : ''}">제목+내용
                                    </option>
                                </select>
                            </label>
                            <input class="search-text" type="text" placeholder="키워드를 입력해 주세요." name="keyword"/>
                            <button type="submit" class="bt_search"><i class="fas fa-search"></i><span
                                    class="skip_info">검색</span></button>
                        </div>
                    </form>
                </div>

                    <form id="pageSizeForm" action="/notice/list" method="get">
                        <select class="form-control form-control-sm" name="size" id="listSize" onchange="changePageSize()">
                            <option value="10" th:selected="${noticePage.noticeList.size() == 10}">10개</option>
                            <option value="15" th:selected="${noticePage.noticeList.size() == 15}">15개</option>
                            <option value="20" th:selected="${noticePage.noticeList.size() == 20}">20개</option>
                        </select>
                    </form>
            </div>



            <div id="bbsList_list">
                <table>
                    <thead>
                    <tr>
                        <th>NO</th>
                        <th>분류</th>
                        <th>제목</th>
                        <th>작성자</th>
                        <th>등록일시</th>
                        <th>조회수</th>
                    </tr>
                    </thead>
                    <tbody id="list">

                    <tr th:if="${notice.notice_category != 'FAQ' && notice.type != '일반'}" th:each="notice : ${topNoticeList}" >
                        <td>
                            <span class="no" th:text="${notice.notice_no}" ></span>
                        </td>
                        <td>
                            <span class="type" name="type" th:text="${notice.notice_category}"></span>
                        </td>
                        <td>
                            <a th:href="@{'/notice/detail/'+ ${notice.notice_no}}">
                                <span th:text="${notice.notice_title}" style="background-color: #8f8f8f"></span>
                            </a>
                        </td>
                        <td>
                            <span class="writer" th:text="${notice.member_id}"></span>
                        </td>

                        <td>
                            <span class="writer" th:text="${notice.notice_regdate}"></span>
                        </td>
                        <td>
                            <span th:text="${notice.view_cnt}"></span>
                        </td>
                    </tr>

                    <tr th:if="${noticePage.allNoticeList.size() == 0}">
                        <td colspan="6" style="text-align: center;">
                            <span >해당 검색어와 일치하는 글이 없습니다.</span>
                        </td>
                    </tr>

                    <tr th:if="${notice.notice_category != 'FAQ'}" th:each="notice:${noticePage.allNoticeList}">
                        <td>
                            <span class="no" th:text="${notice.notice_no}"></span>
                        </td>
                        <td>
                            <span class="type" name="type" th:text="${notice.notice_category}"></span>
                        </td>
                        <td>
                            <a th:href="@{'/notice/detail/'+ ${notice.notice_no}}">
                                <span th:text="${notice.notice_title}"></span>
                            </a>
                        </td>
                        <td>
                            <span class="writer" th:text="${notice.member_id}"></span>
                        </td>

                        <td>
                            <span class="writer" th:text="${notice.notice_regdate}"></span>
                        </td>
                        <td>
                            <span th:text="${notice.view_cnt}"></span>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <!--페이징-->
                <div id="pagination">
                    <div class="paging">
                        <div class="text-center clearfix">
                            <div class="pagingNum">
                    <ul class="pagination-container" style="display: inline;">
                        <li th:if="${noticePage.startPage > 5}" class="page-item">
                            <a class="page-link" th:with="prevPage=${noticePage.startPage - 1}" th:href="@{/notice/list(page=${prevPage}, searchType=${searchType}, keyword=${keyword})}">Prev</a>
                        </li>
                        <li th:if="${pageNum > 0}" th:each="pageNum : ${#numbers.sequence(noticePage.startPage, noticePage.endPage)}" class="page-item">
                            <a th:href="@{/notice/list(page=${pageNum}, searchType=${searchType}, keyword=${keyword})}" th:classappend="${currentPage == pageNum} ? 'active-page' : ''"><span th:text="${pageNum}"></span></a>
                        </li>
                        <li th:if="${noticePage.endPage < noticePage.totalPages}" class="page-item">
                            <a class="page-link" th:with="nextPage=${noticePage.startPage + 5}" th:href="@{/notice/list(page=${nextPage}, searchType=${searchType}, keyword=${keyword})}">Next</a>
                        </li>
                    </ul>
                </div>
            </div>

        </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div th:replace="~{common/fragments/footer :: footerFragment}"></div>
</body>
<script>
    //페이지 표기 수 변경
    function changePageSize() {
        document.getElementById("pageSizeForm").submit();
    }


</script>

</html>